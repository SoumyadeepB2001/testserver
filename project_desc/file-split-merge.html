<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Split and Merge Utility Tool</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/customscrollbar.css">
    <style>
        p {
            max-width: 100%;
        }

        .image-wrapper {
            display: flex;
            justify-content: center;
            margin: 1.5rem 0;
        }

        .image-wrapper img {
            max-width: 100%;
            /* scales down on small screens */
            height: auto;
            /* keeps aspect ratio */
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            object-fit: contain;
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            display: flex;
            justify-content: center;
            margin: 1.5rem 0;
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body>
    <header>
        <div class="header-wrapper">
            <div class="header-content">
                <h1>File Split and Merge Utility Tool</h1>
                <nav>
                    <a href="../index.html">&larr; Back to homepage</a>
                </nav>
            </div>
        </div>
    </header>

    <section class="section">
        <h2>1. Introduction</h2>
        <p style="text-align: justify;">
            This Java application allows users to <b>split large files</b> into smaller parts and <b>reconstruct
                them</b> later.
            It features optional <b>metadata generation</b> for reliable merging, even if filenames are tampered.
        </p>
    </section>

    <section class="section">
        <h2>2. Splitting Process</h2>
        <p style="text-align: justify;">
            When a file is split using the <code>SplitFile</code> class:
        <ul>
            <li>The user selects a file, an output directory, and number of chunks (2–100).</li>
            <li>A <b>metadata file</b> named <code>metadata.part</code> is generated by <code>MetadataGenerator</code>.
            </li>
            <li>Each chunk contains a <b>7-byte header</b>:
                <ul>
                    <li><b>1 byte</b>: Chunk index</li>
                    <li><b>2 bytes</b>: Magic number (short) — same across all parts</li>
                    <li><b>4 bytes</b>: Size of the chunk’s actual data</li>
                </ul>
            </li>
            <li>The remaining bytes are raw file data.</li>
        </ul>
        </p>
    </section>

    <section class="section">
        <h2>3. Metadata File Structure</h2>
        <p style="text-align: justify;">
            The <code>metadata.part</code> file is 271 bytes long, containing:
        <ul>
            <li><b>1 byte</b>: Index = 0 (reserved to mark metadata file)</li>
            <li><b>2 bytes</b>: Magic number</li>
            <li><b>256 bytes</b>: Original filename (UTF-8, padded)</li>
            <li><b>8 bytes</b>: Original file size (long)</li>
            <li><b>4 bytes</b>: Number of chunks (int)</li>
        </ul>
        This structure ensures validation and assists reassembly.
        </p>
    </section>

    <section class="section">
        <h2>4. Merging Process</h2>
        <p style="text-align: justify;">
            During merging via <code>MergeFiles</code>:
        <ul>
            <li>If <b>metadata is present</b>:
                <ul>
                    <li>Magic number and chunk count are read from metadata.</li>
                    <li>Each chunk’s index and magic number is verified against metadata.</li>
                    <li>All chunks (1 to N) are expected to be present.</li>
                </ul>
            </li>
            <li>If <b>metadata is absent</b>:
                <ul>
                    <li>The application infers the order from chunk headers alone.</li>
                    <li>All chunks must have a consistent magic number.</li>
                    <li>It validates that there are no missing or duplicate indices.</li>
                </ul>
            </li>
        </ul>
        </p>
    </section>

    <section class="section">
        <h2>5. Tamper-Proof Mapping Using Headers</h2>
        <p style="text-align: justify;">
            Each chunk includes a <b>header</b> containing its <b>index</b> and <b>magic number</b>. Even if a file is
            renamed, the index can be read via:
        <pre><code>RandomAccessFile.readUnsignedByte(); // index
RandomAccessFile.readShort();       // magic number</code></pre>
        A <b>HashMap&lt;Integer, File&gt;</b> maps index to chunk file, so the actual filename doesn't matter. This
        helps reconstruct the file in correct order.
        </p>
    </section>

    <section class="section">
        <h2>6. Error Handling and Validation</h2>
        <p style="text-align: justify;">
        <ul>
            <li>Duplicate indices or mismatched magic numbers will abort the merge.</li>
            <li>Missing chunks (based on metadata or index gaps) are detected.</li>
            <li>If the metadata is corrupt, the user can proceed using chunk headers alone.</li>
        </ul>
        </p>
    </section>

    <section class="section">
        <h2>7. Screenshots</h2>
        <div class="image-wrapper">
            <img src="../assets/project_photos/file-splitter/splitpanel.png">
        </div>
        <p style="text-align: center; text-justify: inter-word;"><b>Split Panel</b></p>
        <br>
        <div class="image-wrapper">
            <img src="../assets/project_photos/file-splitter/chunks.png">
        </div>
        <p style="text-align: center; text-justify: inter-word;"><b>Chunk files and metadata file after splitting</b>
        </p>
        <br>
        <div class="image-wrapper">
            <img src="../assets/project_photos/file-splitter/mergepanel.png">
        </div>
        <p style="text-align: center; text-justify: inter-word;"><b>Merge Panel</b></p>
        <br>
    </section>

    <footer>
        <p>&copy; 2025 Soumyadeep Banerjee. All rights reserved.</p>
    </footer>
</body>

</html>